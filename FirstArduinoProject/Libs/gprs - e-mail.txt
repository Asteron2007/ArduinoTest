АТ-команды
АТ — запрос состояния, ответ — ОК.
ATE0 — отключить «эхо».
ATE1 — включить «эхо».
Эхо — это повтор введённой команды в терминал.
ATI — название и версия модуля.
AT+getvers — версия прошивки.
AT+IPR=9600 — установка скорости UARTа (9600), возможные варианты — 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200.
AT&W0 — сохранение конфигурации настроек в EEPROM.
AT&W1 — сохранение конфигурации настроек в EEPROM.
0 для нулевого профиля, 1 для первого профиля.
AT+CPAS — проверка статуса модема, ответ — +CPAS: 0.
Статусы: 0 — готов к работе, 2 — неизвестно, 3 — входящий звонок, 4 — в режиме соединения.
AT+CPWROFF — отключение модуля.
AT+CLIP=1 — включить АОН.
AT+CLIP=0 — отключить АОН.
ATD+79634759175; — позвонить.
В терминал будут выводиться сообщения: CONNECT — соединение установлено, BUSY — занят, NO ANSWER — нет ответа, NO CARRIER — вызов сброшен.
ATH — сбросить все соединения.
ATH1 — сбросить текущие соединение.
AT+CMGF=1 — настроить на текстовый формат SMS.
AT+CMGF=0 — настроить SMS на PDU формат.
AT+CSCS=«GSM» — кодировка текста sms — ASCII. Переправьте на нормальные кавычки.
Возможны другие кодировки: HEX – шестнадцатеричными значениями, IRA – международный справочный алфавит, PCCP437 – кодировка CP437(IBM PC), 8859-1 – кодовые страницы семейства ISO 8859, UCS2 – кодировка unicode.
AT+CMGR=1 — чтение sms, где цифра — порядковый номер сообщения. То есть в данном случае читается первое сообщение, так — AT+CMGR=2 второе и т.д.
AT+CMGD=1 — удаление sms, где цифра — порядковый номер сообщения.
AT+CMGD=1,1 — удалить все прочитанные sms.
AT+CMGD=1,2 — удалить все прочитанные и отправленные sms.
AT+CMGD=1,3 — удалить все прочитанные, отправленные и неотправленные sms.
AT+CMGD=1,4 — удалить все sms.
AT+CNMI=1,2,2,1,0 — вывод принятого sms в терминал.


Здесь можно найти исчерпывающую информацию по ат-командам.





оследовательность ввода AT команд с описанием
Настройки интернет соединения
AT+SAPBR=3,1,"CONTYPE","GPRS" // задаем команду выхода в интернет
AT+SAPBR=3,1,"APN","internet.mts.ru" - настройки APN на примере МТС
AT+SAPBR=3,1,"USER","mts" - имя пользователя
AT+SAPBR=3,1,"PWD","mts" - пароль
AT+SAPBR=1,1 - установить GPRS соединение
AT+SAPBR=2,1 - отобразить IP адрес соединения (не обязателно)
Настройки для отправки e-mail :
AT+EMAILCID=1 - Установка CID параметра для email сессии.
AT+EMAILTO=30 - Установка таймаута для SMTP и POP серверов.
AT+SMTPSRV="mail.yahoo.com", 587 - Установка адреса и порта SMTP почтового сервера.
AT+SMTPAUTH=1,"mail@yahoo.com", "password" - Аутентификация (e-mail адрес, и пароль от e-mail)
AT+SMTPFROM="mail@yahoo.com", "Arduino nano" - от кого письмо (почтовый адрес, имя отправителя)
AT+SMTPRCPT=0,0,"info@yahoo.com", "Atmega328" - кому письмо (почтовый адрес, имя получателя)
AT+SMTPSUB= "TEMA" // тема письма
AT+SMTPBODY= 19 // задаем сколько символов в письме
После получение ответа от модуля DOWNLOAD.
вводим текст письма длиной 19 символов.
Для отправки в конце сообщения отправляем символ SUB ( (char)26 или Cntrl+Z)
AT+SMTPSEND - Отправка письма.
Ответы:
1 - письмо успешно отправлено
Некоторые ошибки:
61 - ошибка соединения
63 - ошибка подключения SMTP TCP
64 - время сессии истекло
67 - ошибка аутентификации
AT+SAPBR=0,1 - разорвать GPRS соединение


Для отправки данных на сервер нужно отправить следующие команды:

AT+SAPBR=1,1 – открытие Carrier.

Следующие три команды связаны с установкой настроек подключения к сети.

AT+SAPBR=3,1,\”APN\”,\”internet.mts.ru\” – выбор оператора mts, имя точки доступа.

AT+SAPBR=3,1,\”USER\”,\” mts \” – выбор пользователя mts.

AT+SAPBR=3,1,\”PWD\”,\” mts \”

AT+SAPBR=1,1 – установка соединения.

AT+HTTPINIT – инициализация http.

AT+HTTPPARA=”URL”, – URL адрес.

AT+HTTPREAD – ожидание ответа.

AT+HTTPTERM – остановка http.





AT+CIPSHUT : закрыть TCP порт, что означает прекращение всех соединений 
AT+CGATT? : проверка имеет ли SIM карта интернет соединение или нет 
AT+CSTT = "APN","userName","Pass" : соединение с интернет 
(ex; AT+CSTT="airtelgprs.com","","") 
AT+CIICR : соединение с беспроводной сетью. Проверяемая SIM карта должна иметь предоплаченный объем данных или положительный баланс
AT+CIFSR : получить IP (иногда без этой команды GSM не будет работать поэтому желательно ее использовать)
AT+CIPSTART = ”TCP”,”SERVER IP”,”PORT” : эта команда используется для создания TCP соединения с сервером который мы прописываем в поле SERVER IP
AT+CIPSEND : эта команда используется для передачи данных на сервер. After input, this command server asks for data.


APN: internet.mts.ru
Username: mts
Password: mts






void initGSM()
{
  connectGSM("AT","OK");
  connectGSM("ATE1","OK");
  connectGSM("AT+CPIN?","READY");
}
void initGPRS()
{
  connectGSM("AT+CIPSHUT","OK");
  connectGSM("AT+CGATT=1","OK");
  connectGSM("AT+CSTT=\"airtelgprs.com\",\"\",\"\"","OK");
  connectGSM("AT+CIICR","OK");
  delay(1000);
  Serial1.println("AT+CIFSR");
  delay(1000);
}
