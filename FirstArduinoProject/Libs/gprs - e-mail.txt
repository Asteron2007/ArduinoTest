оследовательность ввода AT команд с описанием
Настройки интернет соединения
AT+SAPBR=3,1,"CONTYPE","GPRS" // задаем команду выхода в интернет
AT+SAPBR=3,1,"APN","internet.mts.ru" - настройки APN на примере МТС
AT+SAPBR=3,1,"USER","mts" - имя пользователя
AT+SAPBR=3,1,"PWD","mts" - пароль
AT+SAPBR=1,1 - установить GPRS соединение
AT+SAPBR=2,1 - отобразить IP адрес соединения (не обязателно)
Настройки для отправки e-mail :
AT+EMAILCID=1 - Установка CID параметра для email сессии.
AT+EMAILTO=30 - Установка таймаута для SMTP и POP серверов.
AT+SMTPSRV="mail.yahoo.com", 587 - Установка адреса и порта SMTP почтового сервера.
AT+SMTPAUTH=1,"mail@yahoo.com", "password" - Аутентификация (e-mail адрес, и пароль от e-mail)
AT+SMTPFROM="mail@yahoo.com", "Arduino nano" - от кого письмо (почтовый адрес, имя отправителя)
AT+SMTPRCPT=0,0,"info@yahoo.com", "Atmega328" - кому письмо (почтовый адрес, имя получателя)
AT+SMTPSUB= "TEMA" // тема письма
AT+SMTPBODY= 19 // задаем сколько символов в письме
После получение ответа от модуля DOWNLOAD.
вводим текст письма длиной 19 символов.
Для отправки в конце сообщения отправляем символ SUB ( (char)26 или Cntrl+Z)
AT+SMTPSEND - Отправка письма.
Ответы:
1 - письмо успешно отправлено
Некоторые ошибки:
61 - ошибка соединения
63 - ошибка подключения SMTP TCP
64 - время сессии истекло
67 - ошибка аутентификации
AT+SAPBR=0,1 - разорвать GPRS соединение